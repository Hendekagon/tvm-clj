<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>tvm-clj.compiler documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">tvm-clj</span> <span class="project-version">6.00-beta-1-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="background.html"><div class="inner"><span>Technical Background</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tvm-clj</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>application</span></div></div></li><li class="depth-3 branch"><a href="tvm-clj.application.image.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>image</span></div></a></li><li class="depth-3"><a href="tvm-clj.application.kmeans.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kmeans</span></div></a></li><li class="depth-2 branch"><a href="tvm-clj.ast.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>ast</span></div></a></li><li class="depth-2 branch current"><a href="tvm-clj.compiler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>compiler</span></div></a></li><li class="depth-2 branch"><a href="tvm-clj.device.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>device</span></div></a></li><li class="depth-2 branch"><a href="tvm-clj.module.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>module</span></div></a></li><li class="depth-2"><a href="tvm-clj.schedule.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>schedule</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="tvm-clj.compiler.html#var-compile"><div class="inner"><span>compile</span></div></a></li><li class="depth-1"><a href="tvm-clj.compiler.html#var-int-.3Elowered-function-type-map"><div class="inner"><span>int-&gt;lowered-function-type-map</span></div></a></li><li class="depth-1"><a href="tvm-clj.compiler.html#var-ir-.3Efn"><div class="inner"><span>ir-&gt;fn</span></div></a></li><li class="depth-1"><a href="tvm-clj.compiler.html#var-lower"><div class="inner"><span>lower</span></div></a></li><li class="depth-1"><a href="tvm-clj.compiler.html#var-lowered-function-type-.3Eint-map"><div class="inner"><span>lowered-function-type-&gt;int-map</span></div></a></li><li class="depth-1"><a href="tvm-clj.compiler.html#var-view-ir"><div class="inner"><span>view-ir</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">tvm-clj.compiler</h1><div class="doc"><div class="markdown"><p>Once a user has a schedule, they then need to compile the schedule into actual executable code. This produces a module which contains all of the executable code, cuda/opencl modules, etc required to run the schedule.</p></div></div><div class="public anchor" id="var-compile"><h3>compile</h3><div class="usage"><code>(compile fn-map {:keys [target-host], :or {target-host "llvm"}})</code><code>(compile fn-map)</code></div><div class="doc"><div class="markdown"><p>Build a map of function entries. fn-entries is a map of name to fn-data and fn-data is a map containing:</p>
<ul>
  <li><code>:schedule</code> - schedule to use.</li>
  <li><code>:arguments</code> - argument declarations to the function</li>
  <li><code>:bind-map</code> - optional map of argument to bind declaration to declare the  memory layout of the argument.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/techascent/tvm-clj/blob/master/src/tvm_clj/compiler.clj#L486">view source</a></div></div><div class="public anchor" id="var-int-.3Elowered-function-type-map"><h3>int-&gt;lowered-function-type-map</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/techascent/tvm-clj/blob/master/src/tvm_clj/compiler.clj#L168">view source</a></div></div><div class="public anchor" id="var-ir-.3Efn"><h3>ir-&gt;fn</h3><div class="usage"><code>(ir-&gt;fn ir-data fn-name)</code></div><div class="doc"><div class="markdown"><p>Given map of {<code>:schedule</code> <code>:arguments</code>} containing optionally <code>:target</code> create a clojure fn that calls into TVM.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tvm-clj/blob/master/src/tvm_clj/compiler.clj#L523">view source</a></div></div><div class="public anchor" id="var-lower"><h3>lower</h3><div class="usage"><code>(lower sch args {:keys [name binds simple-mode? optimization-level], :or {name "main", optimization-level 2}})</code></div><div class="doc"><div class="markdown"><p>Lowering step before build into target.</p>
<p>Users do not often need to call this themselves but it is useful in order to see code produced by different scheduling primitives. The return value prints the schedule nicely to the REPL.</p>
<p>Parameters  ———-  sch : tvm.te.schedule.Schedule  The schedule to be built</p>
<p>args : list of Buffer or Tensor or Var  The argument lists to the function.</p>
<p>name : str, optional  The name of result function.</p>
<p>binds : dict of :any:<code>Tensor</code> to :any:<code>Buffer</code>, optional  Dictionary that maps the Tensor to Buffer which specified the data layout  requirement of the function. By default, a new compact buffer is created  for each tensor in the argument.</p>
<p>simple_mode : bool, optional  Whether only output simple and compact statement, this will skip  LoopPartition, api wrapper generation and Unrolling.</p>
<p>Returns  ——-  m : IRModule or Stmt  The result IRModule, if simple_mode=False  Then the Stmt before make api is returned.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tvm-clj/blob/master/src/tvm_clj/compiler.clj#L332">view source</a></div></div><div class="public anchor" id="var-lowered-function-type-.3Eint-map"><h3>lowered-function-type-&gt;int-map</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/techascent/tvm-clj/blob/master/src/tvm_clj/compiler.clj#L162">view source</a></div></div><div class="public anchor" id="var-view-ir"><h3>view-ir</h3><div class="usage"><code>(view-ir ir-data)</code></div><div class="doc"><div class="markdown"><p>Lower the schedule without optimizations returning an IR layer that has a nice pprint for inspecting schedule state.</p></div></div><div class="src-link"><a href="https://github.com/techascent/tvm-clj/blob/master/src/tvm_clj/compiler.clj#L532">view source</a></div></div></div></body></html>